<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Karten</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <link rel="stylesheet" href="styles_index.css"> <!-- Füge deine vorhandenen Styles hinzu -->
    <script src="location.js"></script>
</head>

<body>
    <nav>
        <ul>
            <li><a href="index.html">Startseite</a></li>
            <li><a href="about.html">Über diese Webseite</a></li>
            <li><a href="contact.html">Kontakt</a></li>
            <li><a href="image.html">Bild bearbeiten</a></li>
            <li><a href="maps.html">Karten</a></li>
            <li><a href="camera.html">Kamera</a></li>
        </ul>
    </nav>

    <div id="maps">
        <h2>Karten</h2>
        <div class="section_item">
            <h3>GPS</h3>
            <div id="geoloc">
                <button onclick="getLocation()">Get location</button>
                <p id="p_geoloc">Geolocation not available.</p>
            </div>
        </div>

        <div id="map" class="map-container"></div>
    </div>

    <script>
        var mymap = L.map('map').setView([51.505, -0.09], 13); // Startposition und Zoom-Level

        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(mymap);

        function showPosition(position) {
            var lat = position.coords.latitude;
            var lon = position.coords.longitude;

            // Hier kannst du den aktuellen Standort als Marker hinzufügen
            var marker = L.marker([lat, lon]).addTo(mymap)
                .bindPopup('Aktueller Standort')
                .openPopup();
            
            // Zentriere die Karte auf den aktuellen Standort
            mymap.setView([lat, lon], 13);
        }

        function getLocation() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(showPosition, showError);
            } else {
                document.getElementById("p_geoloc").innerHTML = "Geolocation is not supported by this browser.";
            }
        }

        function showError(error) {
            var errorMsg = "";
            switch (error.code) {
                case error.PERMISSION_DENIED:
                    errorMsg = "User denied the request for Geolocation.";
                    break;
                case error.POSITION_UNAVAILABLE:
                    errorMsg = "Location information is unavailable.";
                    break;
                case error.TIMEOUT:
                    errorMsg = "The request to get user location timed out.";
                    break;
                case error.UNKNOWN_ERROR:
                    errorMsg = "An unknown error occurred.";
                    break;
            }
            document.getElementById("p_geoloc").innerHTML = errorMsg;
        }
    </script>
</body>

</html>
